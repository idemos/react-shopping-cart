[{"/var/www/html/react-shopping-cart/src/index.js":"1","/var/www/html/react-shopping-cart/src/AppList.js":"2","/var/www/html/react-shopping-cart/src/components/Products.js":"3","/var/www/html/react-shopping-cart/src/components/CartItems.js":"4","/var/www/html/react-shopping-cart/src/store/index.js":"5","/var/www/html/react-shopping-cart/src/store/product.js":"6","/var/www/html/react-shopping-cart/src/store/cart.js":"7","/var/www/html/react-shopping-cart/src/store/reducer.js":"8","/var/www/html/react-shopping-cart/src/store/auth.js":"9","/var/www/html/react-shopping-cart/src/store/error.js":"10","/var/www/html/react-shopping-cart/src/crud/cart.js":"11","/var/www/html/react-shopping-cart/src/crud/auth.js":"12"},{"size":645,"mtime":1626939949967,"results":"13","hashOfConfig":"14"},{"size":3700,"mtime":1626885611247,"results":"15","hashOfConfig":"14"},{"size":2756,"mtime":1626444427759,"results":"16","hashOfConfig":"14"},{"size":3501,"mtime":1625467679995,"results":"17","hashOfConfig":"14"},{"size":229,"mtime":1625467679999,"results":"18","hashOfConfig":"14"},{"size":2371,"mtime":1625467679999,"results":"19","hashOfConfig":"14"},{"size":4063,"mtime":1626879673175,"results":"20","hashOfConfig":"14"},{"size":399,"mtime":1626872614207,"results":"21","hashOfConfig":"14"},{"size":907,"mtime":1626885482031,"results":"22","hashOfConfig":"14"},{"size":796,"mtime":1626880782951,"results":"23","hashOfConfig":"14"},{"size":3039,"mtime":1626959816167,"results":"24","hashOfConfig":"14"},{"size":1341,"mtime":1626885667847,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"dov8an",{"filePath":"29","messages":"30","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"28"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"28"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"28"},"/var/www/html/react-shopping-cart/src/index.js",[],["54","55"],"/var/www/html/react-shopping-cart/src/AppList.js",["56","57","58","59","60"],"import { useEffect,useState } from \"react\";\nimport Products from \"./components/Products.js\";\nimport CartItems from \"./components/CartItems.js\";\n\nimport \"./App.css\";\nimport './modalLogin.css'\n\nimport {loadProducts} from './store/product';\nimport * as Cart from './crud/cart';\nimport * as Auth from './crud/auth';\n\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport Modal from 'react-modal';\nimport Zoom from 'react-reveal/Zoom';\n\n\n\nconst App = (props) =>  {\n\n  const dispatch = useDispatch();\n  const [msg, setMsg] = useState(\"\");\n  const [showAuth, setShowAuth] = useState(false);\n  const [auth, setAuth] = useState(null);\n  const products = useSelector((state) => state.entities.products.list);\n  const cartItems = useSelector((state) => state.entities.carts.list);\n  //const [cartItems, setCartItems] = useState([]);\n\n  const [login, setLogin] = useState({});\n  \n  const handlerLogin = (e) => {\n    setLogin({ ...login, [e.target.name]: e.target.value })\n  }\n\n  const setShowAuthCustom = (val, obj) => {\n    console.info(\"val\",val);\n    console.log(obj.target.name);\n  }\n\n\n  function loadData() {\n    loadProducts(dispatch);\n    Cart.load(dispatch);\n    loadAuth(false);\n    console.log(\"auth\",auth);\n  }\n\n  const loadAuth = (authenticated) => {\n    // vedo se l'utente Ã¨ loggato attraverso lo storage\n    setShowAuth(authenticated);\n    //setAuth(!authenticated);\n  }\n\n\n  useEffect(() => {\n    loadData()\n  }, []);\n\n\n  const checkout = (user) => {\n    //console.log(user);\n    alert(\"checkout inviato con successo\");\n  };\n  \n  const handlerLoginSubmit = () => {\n    console.log(login);\n    Auth.login(dispatch, login);\n    //Auth.login(dispatch(login));\n  };\n\n  const showModal = (authenticated) => {\n    //console.log(\"showModal\" + product);\n    setShowAuth(authenticated);\n\n}\n\nconst hideModal = () => {\n    //console.log(\"hideModal\");\n    setShowAuth(null);\n}\n\n\n//console.log(\"productslist=>\", products)\n\n  return (\n\n    <div className=\"app\">\n        <header></header>\n        <main>\n          <div className=\"main\">\n            <Products data={products} addCart={Cart.add} />\n          </div>\n          <div className=\"sidebar\">\n            {msg}\n            <CartItems\n              cartItems={cartItems}\n              removeCart={Cart.remove}\n              emptyCart={Cart.empty}\n              checkout={checkout}\n            />\n          </div>\n        </main>\n        <button className=\"button primary\" name=\"btn_login\" onClick={() => setShowAuth(true) }>Show login</button>\n        <footer>footer</footer>\n        {\n          !auth && (\n              <Modal isOpen={showAuth} onRequestClose={() => hideModal()} className=\"modalLogin\" ariaHideApp={false}>\n                  <Zoom><>\n                      <button className=\"close-modal\" type=\"button\" onClick={() => hideModal()}>x</button>\n                      <div className=\"login\">\n                        <div className=\"login-username\">\n                          <input type=\"email\" name=\"email\" required placeholder=\"your best email\" onChange={handlerLogin} />\n                        </div>  \n                        <div className=\"login-password\">\n                          <input type=\"password\" name=\"password\" required placeholder=\"password\" onChange={handlerLogin} />\n                        </div>\n                        <div className=\"login-options\">\n                          <button type=\"button\" onClick={() => hideModal()}>Chiudo</button>\n                          <button type=\"button\" onClick={handlerLoginSubmit}>Login</button>\n                        </div>\n                      </div>\n                  </></Zoom>\n              </Modal>\n          )\n        }\n    </div>\n  );\n\n}\n\nexport default App;","/var/www/html/react-shopping-cart/src/components/Products.js",[],"/var/www/html/react-shopping-cart/src/components/CartItems.js",[],"/var/www/html/react-shopping-cart/src/store/index.js",[],"/var/www/html/react-shopping-cart/src/store/product.js",[],"/var/www/html/react-shopping-cart/src/store/cart.js",["61","62"],"import { createSlice } from \"@reduxjs/toolkit\";\nimport * as yup from 'yup';\n\n// action types\n// we dont need anymore\nlet lastId = 0;\nconst slice = createSlice({\n    name:\"carts\",\n    initialState:{\n        list:[],\n        loading:false,\n        lastFetch:null,\n        lastAdded:null,\n        isError:false,\n        msg:''\n    },\n    reducers:{\n        added: (carts, action) => {\n            console.log(\"payload\",action.payload);\n\n            if (carts.list.length > 0) {\n                // const index = carts.list.findIndex(function(cart) {\n                //     //console.log(cart.id+\" == \"+action.payload.cart.product_id+\" && \"+cart.user_id+\" == \"+action.payload.cart.user_id);\n                //     console.log(\"tutto \", cart.id === action.payload.cart.product_id && cart.user_id === action.payload.cart.user_id);\n                //     // console.log(\"prima \", cart.id === action.payload.cart.product_id);\n                //     // console.log(\"seconda \", cart.user_id === action.payload.cart.user_id);\n                //     if (parseInt(cart.product_id) === parseInt(action.payload.cart.product_id) && parseInt(cart.user_id) === parseInt(action.payload.cart.user_id)){\n                //         return true;\n                //     }\n                //     return false;\n\n                // });\n\n                const index = carts.list.findIndex((cart) => (parseInt(cart.product_id) === parseInt(action.payload.cart.product_id) && parseInt(cart.user_id) === parseInt(action.payload.cart.user_id)));\n                console.log(index);\n\n          \n                if (index >= 0) {\n                    carts.msg = \"The Article is already added\";\n                    carts.list[index].qta = (carts.list[index].qta ? ++carts.list[index].qta : 1);\n                    carts.list[index].price = (carts.list[index].price ? (carts.list[index].price + action.payload.cart.price) : action.payload.cart.price);\n                    //setCartItems(cartItems_clone);\n                } else {\n                    carts.msg = \"The Article added\";\n                    // setCartItems([...cartItems_clone, { ...product, qta: 1 }]);\n                    carts.list.push({\n                        ...action.payload.cart,\n                    });\n                }\n            } else {\n                carts.msg = \"The Article added\";\n                // setCartItems([{ ...product, qta: 1 }]);\n                carts.list.push({\n                    ...action.payload.cart\n                });\n            }\n\n            carts.lastAdded = { ...action.payload.cart };\n            return carts;\n\n        },\n        fetched: (carts, action) => {\n            console.log(action.payload);\n            carts.list = action.payload;\n            carts.loading = false;\n        },\n        sorted: (carts, action) => {\n\n            carts.list.sort(function (a, b) {\n                if (action.payload.sort === \"asc\") {\n                  return a.price > b.price ? 1 : -1;\n                } else if (action.payload.sort === \"desc\") {\n                  return a.price < b.price ? 1 : -1;\n                } else {\n                  return a.id > b.id ? 1 : -1;\n                }\n            });\n        },\n        removed: (carts, action) => {\n            carts.list = carts.list.filter(cart => action.payload.id !== cart.id);\n            // const index = carts.list.findIndex(product => action.payload.id !== product.id);\n            // carts.list.slice(index,1);\n        },\n        errored: (carts, action) => {\n          carts.isError = true;\n          carts.msg = action.payload.msg;\n          // const index = carts.list.findIndex(product => action.payload.id !== product.id);\n          // carts.list.slice(index,1);\n        },\n        empty: (carts, action) => {\n            //carts.list = [];\n            carts.list = carts.list.filter(cart => action.payload.user_id !== cart.user_id);\n        },\n    }\n});\n\nexport const {added, fetched, removed, sorted, empty, errored} = slice.actions;\n//export const selectAllcarts = state => state.entities.carts;\nexport default slice.reducer;\n","/var/www/html/react-shopping-cart/src/store/reducer.js",[],"/var/www/html/react-shopping-cart/src/store/auth.js",[],"/var/www/html/react-shopping-cart/src/store/error.js",[],"/var/www/html/react-shopping-cart/src/crud/cart.js",[],"/var/www/html/react-shopping-cart/src/crud/auth.js",["63","64"],"import * as yup from 'yup';\nimport * as Auth from '../store/auth';\nimport {setErrorTrue, setErrorFalse} from '../store/error';\n\n\n\nconst login = async (dispatch, {email,password}) => {\n\n  //console.log(\"email\", email);\n  //console.log(\"password\", password);\n\n  try {\n\n      const res = await fetch(\"http://localhost:5000/api/auth\", { \n          headers: {\n            \"Content-Type\": \"application/json;charset=utf-8\"\n          },\n          method: \"POST\",\n          body: JSON.stringify({email,password})\n      });\n\n      const user = await res.json();\n      console.log(\"user\", user);\n      if(user.length === 0){\n          dispatch(Auth.failed());\n          setErrorTrue(dispatch, 'Login o Password Errati');\n      }else{\n          dispatch(Auth.login(user[0]));\n          setErrorFalse(dispatch);\n      }\n\n\n  } catch (e) {\n      \n      dispatch(Auth.failed());\n      setErrorTrue(dispatch, 'Si sono verificati degli errori nella LOGIN');\n      console.error(e.message);\n\n  }\n}\n\nconst logout = () => async dispatch => {\n  \n  try {\n      const res = await fetch(\"http://localhost:5000/api/auth/logout\");\n      const auth = await res.json();\n\n      return dispatch(Auth.logout());\n\n  } catch (e) {\n      \n      console.error(e.message);\n      setErrorTrue(dispatch, 'Si sono verificati degli errori al LOGOUT');\n  }\n}\n\nexport {login, logout};",{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","replacedBy":"68"},{"ruleId":"69","severity":1,"message":"70","line":22,"column":15,"nodeType":"71","messageId":"72","endLine":22,"endColumn":21},{"ruleId":"69","severity":1,"message":"73","line":24,"column":16,"nodeType":"71","messageId":"72","endLine":24,"endColumn":23},{"ruleId":"69","severity":1,"message":"74","line":35,"column":9,"nodeType":"71","messageId":"72","endLine":35,"endColumn":26},{"ruleId":"75","severity":1,"message":"76","line":57,"column":6,"nodeType":"77","endLine":57,"endColumn":8,"suggestions":"78"},{"ruleId":"69","severity":1,"message":"79","line":71,"column":9,"nodeType":"71","messageId":"72","endLine":71,"endColumn":18},{"ruleId":"69","severity":1,"message":"80","line":2,"column":13,"nodeType":"71","messageId":"72","endLine":2,"endColumn":16},{"ruleId":"69","severity":1,"message":"81","line":6,"column":5,"nodeType":"71","messageId":"72","endLine":6,"endColumn":11},{"ruleId":"69","severity":1,"message":"80","line":1,"column":13,"nodeType":"71","messageId":"72","endLine":1,"endColumn":16},{"ruleId":"69","severity":1,"message":"82","line":46,"column":13,"nodeType":"71","messageId":"72","endLine":46,"endColumn":17},"no-native-reassign",["83"],"no-negated-in-lhs",["84"],"no-unused-vars","'setMsg' is assigned a value but never used.","Identifier","unusedVar","'setAuth' is assigned a value but never used.","'setShowAuthCustom' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","ArrayExpression",["85"],"'showModal' is assigned a value but never used.","'yup' is defined but never used.","'lastId' is assigned a value but never used.","'auth' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"86","fix":"87"},"Update the dependencies array to be: [loadData]",{"range":"88","text":"89"},[1426,1428],"[loadData]"]