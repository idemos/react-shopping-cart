{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport Filter from \"./components/Filter.js\";\nimport Products from \"./components/Products.js\";\nimport CartItems from \"./components/CartItems.js\";\nimport data from \"./data.json\";\nimport \"./App.css\";\nimport * as actions from './store/product';\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst App = props => {\n  _s();\n\n  //const [products, setProducts] = useState([]);\n  const [cartItems, setCartItems] = useState([]);\n  const [size, setSize] = useState(\"\");\n  const [msg, setMsg] = useState(\"\");\n  const [sort, setSort] = useState(\"asc\");\n  const dispatch = useDispatch();\n  const products = useSelector(actions.productListed);\n\n  const loadProducts = async () => {\n    //const res = await fetch(\"http://localhost:5000/api/products\", { mode: 'no-cors' });\n    const res = await fetch(\"http://localhost:5000/api/products\");\n    const pro = await res.json(); //console.log('aproducts=>',pro);\n\n    dispatch(actions.productListed({\n      pro\n    })); //setProducts(pro);\n  };\n\n  useEffect(() => {\n    loadProducts();\n  }, []);\n\n  function productsSort(e) {\n    setSort(e.target.value);\n    const products_sorted = products.sort(function (a, b) {\n      if (e.target.value === \"asc\") {\n        return a.price > b.price ? 1 : -1;\n      } else if (e.target.value === \"desc\") {\n        return a.price < b.price ? 1 : -1;\n      } else {\n        return a.id > b.id ? 1 : -1;\n      }\n    }); //setProducts(products_sorted);\n  }\n\n  const productsSize = e => {\n    setSize(e.target.value);\n    const products_filter = data.filter(product => product.availableSizes.indexOf(e.target.value) >= 0); //setProducts(products_filter);\n  };\n\n  const removeCart = id => {\n    let cartItems_clone = cartItems.slice(); //cartItems_clone = cartItems_clone.filter((cart)=> cart.id !== id);\n\n    setCartItems(cartItems_clone.filter(cart => cart.id !== id)); //console.log(\"remove cart\", id);\n  };\n\n  const checkout = user => {\n    console.log(user);\n    alert(\"checkout inviato con successo\");\n  };\n\n  const addCart = product => {\n    if (cartItems.length > 0) {\n      const cartItems_clone = cartItems.slice();\n      const id = cartItems_clone.findIndex(cart => cart.id === product.id);\n\n      if (id >= 0) {\n        setMsg(\"The Article is already added\");\n        cartItems_clone[id].count = cartItems_clone[id].count ? ++cartItems_clone[id].count : 1;\n        setCartItems(cartItems_clone);\n      } else {\n        setMsg(\"The Article added\");\n        setCartItems([...cartItems_clone, { ...product,\n          count: 1\n        }]);\n      }\n    } else {\n      setMsg(\"The Article added\");\n      setCartItems([{ ...product,\n        count: 1\n      }]);\n    }\n  };\n\n  return console.log(products); // return (\n  //     <div className=\"app\">\n  //       <header></header>\n  //       <main>\n  //         <div className=\"main\">\n  //           {console.log(\"size\", size)}\n  //           {console.log(\"products\", products)}\n  //           <Filter\n  //             products={products}\n  //             sort={sort}\n  //             size={size}\n  //             productsSort={productsSort}\n  //             productsSize={productsSize}\n  //           />\n  //           <Products data={products} addCart={addCart} />\n  //         </div>\n  //         <div className=\"sidebar\">\n  //           {msg}\n  //           <CartItems\n  //             cartItems={cartItems}\n  //             removeCart={removeCart}\n  //             checkout={checkout}\n  //           />\n  //         </div>\n  //       </main>\n  //       <footer>footer</footer>\n  //     </div>\n  // );\n};\n\n_s(App, \"PVOzFRnJhYAS+rJ9Ccy5dsEg/AY=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/ciro/project/react-shopping-cart/src/App.js"],"names":["useEffect","useState","Filter","Products","CartItems","data","actions","useDispatch","useSelector","App","props","cartItems","setCartItems","size","setSize","msg","setMsg","sort","setSort","dispatch","products","productListed","loadProducts","res","fetch","pro","json","productsSort","e","target","value","products_sorted","a","b","price","id","productsSize","products_filter","filter","product","availableSizes","indexOf","removeCart","cartItems_clone","slice","cart","checkout","user","console","log","alert","addCart","length","findIndex","count"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport Filter from \"./components/Filter.js\";\nimport Products from \"./components/Products.js\";\nimport CartItems from \"./components/CartItems.js\";\nimport data from \"./data.json\";\nimport \"./App.css\";\nimport * as actions from './store/product';\nimport { useDispatch, useSelector } from \"react-redux\";\n\n\n\nconst App = (props) =>  {\n  //const [products, setProducts] = useState([]);\n  const [cartItems, setCartItems] = useState([]);\n  const [size, setSize] = useState(\"\");\n  const [msg, setMsg] = useState(\"\");\n  const [sort, setSort] = useState(\"asc\");\n\n  const dispatch = useDispatch();\n  const products = useSelector(actions.productListed)\n\n  const loadProducts = async () => {\n    //const res = await fetch(\"http://localhost:5000/api/products\", { mode: 'no-cors' });\n    const res = await fetch(\"http://localhost:5000/api/products\");\n    const pro = await res.json();\n\n    //console.log('aproducts=>',pro);\n    dispatch(actions.productListed({pro}));\n    //setProducts(pro);\n  };\n\n  useEffect(() => {\n    loadProducts();\n  }, []);\n\n  function productsSort(e) {\n    setSort(e.target.value);\n\n    const products_sorted = products.sort(function (a, b) {\n      if (e.target.value === \"asc\") {\n        return a.price > b.price ? 1 : -1;\n      } else if (e.target.value === \"desc\") {\n        return a.price < b.price ? 1 : -1;\n      } else {\n        return a.id > b.id ? 1 : -1;\n      }\n    });\n\n    //setProducts(products_sorted);\n  }\n\n  const productsSize = (e) => {\n    setSize(e.target.value);\n\n    const products_filter = data.filter(\n      (product) => product.availableSizes.indexOf(e.target.value) >= 0\n    );\n    //setProducts(products_filter);\n  };\n\n  const removeCart = (id) => {\n    let cartItems_clone = cartItems.slice();\n    //cartItems_clone = cartItems_clone.filter((cart)=> cart.id !== id);\n    setCartItems(cartItems_clone.filter((cart) => cart.id !== id));\n    //console.log(\"remove cart\", id);\n  };\n\n  const checkout = (user) => {\n    console.log(user);\n    alert(\"checkout inviato con successo\");\n  };\n\n  const addCart = (product) => {\n    if (cartItems.length > 0) {\n      const cartItems_clone = cartItems.slice();\n      const id = cartItems_clone.findIndex((cart) => cart.id === product.id);\n\n      if (id >= 0) {\n        setMsg(\"The Article is already added\");\n\n        cartItems_clone[id].count = cartItems_clone[id].count\n          ? ++cartItems_clone[id].count\n          : 1;\n        setCartItems(cartItems_clone);\n      } else {\n        setMsg(\"The Article added\");\n        setCartItems([...cartItems_clone, { ...product, count: 1 }]);\n      }\n    } else {\n      setMsg(\"The Article added\");\n      setCartItems([{ ...product, count: 1 }]);\n    }\n  };\n\n  return (\n\n    console.log(products)\n  );\n\n  // return (\n  //     <div className=\"app\">\n  //       <header></header>\n  //       <main>\n  //         <div className=\"main\">\n  //           {console.log(\"size\", size)}\n  //           {console.log(\"products\", products)}\n  //           <Filter\n  //             products={products}\n  //             sort={sort}\n  //             size={size}\n  //             productsSort={productsSort}\n  //             productsSize={productsSize}\n  //           />\n  //           <Products data={products} addCart={addCart} />\n  //         </div>\n  //         <div className=\"sidebar\">\n  //           {msg}\n  //           <CartItems\n  //             cartItems={cartItems}\n  //             removeCart={removeCart}\n  //             checkout={checkout}\n  //           />\n  //         </div>\n  //       </main>\n  //       <footer>footer</footer>\n  //     </div>\n  // );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}